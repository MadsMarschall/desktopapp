(()=>{"use strict";var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=require("react/jsx-runtime"),n=require("react-bootstrap/SSRProvider");var r=e.n(n);const o=require("react-router-dom"),i=require("react");var c=e.n(i);const a=require("socket.io-client");var s=e.n(a)()("http://settings-controller.local",{transports:["websocket"]}),u=c().createContext(s);const l=require("react-bootstrap");var T,A,E;!function(e){e.SORT_OPERATION="SORT_OPERATION",e.DATASOURCE="DATASOURCE",e.SLICE_DATA_OPERATION="SLICE_DATA_OPERATION",e.SELECT_FROM_DB="SELECT_FROM_DB",e.MAP_DISPLAY="MAP_DISPLAY",e.TIME_SLIDER="TIME_SLIDER",e.TIME_PLAYER="TIME_PLAYER"}(T||(T={})),function(e){e[e.DATA_OPERATION_GET_DATA=0]="DATA_OPERATION_GET_DATA",e[e.DATAOPERATION_GET_TYPE=1]="DATAOPERATION_GET_TYPE",e[e.DATA_OPERATION_SET_SETTINGS=2]="DATA_OPERATION_SET_SETTINGS",e[e.DATA_OPERATION_TRIGGER_OPERATION=3]="DATA_OPERATION_TRIGGER_OPERATION",e[e.DATA_OPERATION_RETRIGGER_OPERATION_CHAIN_FORWARD=4]="DATA_OPERATION_RETRIGGER_OPERATION_CHAIN_FORWARD",e[e.DATA_OPERATION_RETRIGGER_OPERATION_CHAIN_BACKWARD=5]="DATA_OPERATION_RETRIGGER_OPERATION_CHAIN_BACKWARD",e[e.DATA_OPERATION_SET_SOURCE=6]="DATA_OPERATION_SET_SOURCE",e[e.DATA_OPERATION_GET_SOURCE=7]="DATA_OPERATION_GET_SOURCE",e[e.DATA_OPERATION_SET_TARGET=8]="DATA_OPERATION_SET_TARGET",e[e.DATA_OPERATION_GET_TARGET=9]="DATA_OPERATION_GET_TARGET",e[e.CHAIN_CONTROLLER_CREATE_OPERATION_NODE=10]="CHAIN_CONTROLLER_CREATE_OPERATION_NODE",e[e.CHAIN_CONTROLLER_GET_OPERATION_BY_NODE_ID=11]="CHAIN_CONTROLLER_GET_OPERATION_BY_NODE_ID",e[e.CHAIN_CONTROLLER_REMOVE_NODE_BY_ID=12]="CHAIN_CONTROLLER_REMOVE_NODE_BY_ID",e[e.CHAIN_CONTROLLER_CONNECT_OPERATION_NODES=13]="CHAIN_CONTROLLER_CONNECT_OPERATION_NODES",e[e.DATA_OPERATION_GET_SETTINGS=14]="DATA_OPERATION_GET_SETTINGS"}(A||(A={})),function(e){e[e.FRIDAY=0]="FRIDAY",e[e.SATURDAY=1]="SATURDAY",e[e.SUNDAY=2]="SUNDAY",e[e.TEST=3]="TEST"}(E||(E={}));var _=c().createContext(),O=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function c(e){try{s(r.next(e))}catch(e){i(e)}}function a(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,a)}s((r=r.apply(e,t||[])).next())}))},h=function(e,t){var n,r,o,i,c={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,r=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!((o=(o=c.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){c.label=i[1];break}if(6===i[0]&&c.label<o[1]){c.label=o[1],o=i;break}if(o&&c.label<o[2]){c.label=o[2],c.ops.push(i);break}o[2]&&c.ops.pop(),c.trys.pop();continue}i=t.call(e,c)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};const p=function(){function e(e,t){this.channel="ipc-data-operation",this.ID=e,this.ipc=t}return e.prototype.getData=function(){return this.ipc?this.ipc.invoke(this.channel,this.ID,A.DATA_OPERATION_GET_DATA,[]):Promise.reject(new Error("IPC not available"))},e.prototype.getSource=function(){return O(this,void 0,void 0,(function(){var t,n;return h(this,(function(r){switch(r.label){case 0:return this.ipc?(t=this.ipc.invoke(this.channel,this.ID,A.DATA_OPERATION_GET_SOURCE,[]),n=e.bind,[4,t]):[2,Promise.reject(new Error("IPC not available"))];case 1:return[2,new(n.apply(e,[void 0,r.sent(),this.ipc]))]}}))}))},e.prototype.getTarget=function(){return O(this,void 0,void 0,(function(){var t,n;return h(this,(function(r){switch(r.label){case 0:return this.ipc?(t=this.ipc.invoke(this.channel,this.ID,A.DATA_OPERATION_GET_TARGET,[]),n=e.bind,[4,t]):[2,Promise.reject(new Error("IPC not available"))];case 1:return[2,new(n.apply(e,[void 0,r.sent(),this.ipc]))]}}))}))},e.prototype.getType=function(){return this.ipc?this.ipc.invoke(this.channel,this.ID,A.DATAOPERATION_GET_TYPE,[]):Promise.reject(new Error("IPC not available"))},e.prototype.retriggerOperationChainBackward=function(){return this.ipc?this.ipc.invoke(this.channel,this.ID,A.DATA_OPERATION_RETRIGGER_OPERATION_CHAIN_BACKWARD,[]):Promise.reject(new Error("IPC not available"))},e.prototype.retriggerOperationChainForward=function(){return this.ipc?this.ipc.invoke(this.channel,this.ID,A.DATA_OPERATION_RETRIGGER_OPERATION_CHAIN_FORWARD,[]):Promise.reject(new Error("IPC not available"))},e.prototype.setSettings=function(e){var t;return this.ipc?(t=this.ipc).invoke.apply(t,function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}([this.channel,this.ID,A.DATA_OPERATION_SET_SETTINGS],e,!1)):Promise.reject(new Error("IPC not available"))},e.prototype.setSource=function(e){return O(this,void 0,void 0,(function(){var t,n,r,o;return h(this,(function(i){switch(i.label){case 0:return this.ipc?(t=e,r=(n=this.ipc).invoke,o=[this.channel,this.ID,A.DATA_OPERATION_SET_SOURCE],[4,t.getId()]):[2,Promise.reject(new Error("IPC not available"))];case 1:return[2,r.apply(n,o.concat([i.sent()]))]}}))}))},e.prototype.setTarget=function(e){return O(this,void 0,void 0,(function(){var t,n,r,o;return h(this,(function(i){switch(i.label){case 0:return this.ipc?(t=e,r=(n=this.ipc).invoke,o=[this.channel,this.ID,A.DATA_OPERATION_SET_TARGET],[4,t.getId()]):[2,Promise.reject(new Error("IPC not available"))];case 1:return[2,r.apply(n,o.concat([i.sent()]))]}}))}))},e.prototype.triggerOperation=function(){return this.ipc?this.ipc.invoke(this.channel,this.ID,A.DATA_OPERATION_TRIGGER_OPERATION,[]):Promise.reject(new Error("IPC not available"))},e.prototype.getId=function(){return Promise.resolve(this.ID)},e.prototype.getSettings=function(){return this.ipc?this.ipc.invoke(this.channel,this.ID,A.DATA_OPERATION_GET_SETTINGS,[]):Promise.reject(new Error("IPC not available"))},e}();var R=function(){return R=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},R.apply(this,arguments)},I=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function c(e){try{s(r.next(e))}catch(e){i(e)}}function a(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,a)}s((r=r.apply(e,t||[])).next())}))},f=function(e,t){var n,r,o,i,c={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,r=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!((o=(o=c.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){c.label=i[1];break}if(6===i[0]&&c.label<o[1]){c.label=o[1],o=i;break}if(o&&c.label<o[2]){c.label=o[2],c.ops.push(i);break}o[2]&&c.ops.pop(),c.trys.pop();continue}i=t.call(e,c)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};function P(){var e,n,r=this,a=c().useState(""),s=a[0],T=a[1],A=c().useState(),O=A[0],h=A[1],P=c().useState(E.TEST),N=P[0],d=P[1],v=c().useState(),D=v[0],y=v[1],S=(0,i.useContext)(u),C=(0,i.useContext)(_);return(0,i.useEffect)((function(){D&&D.setSettings([N,O])}),[O,N]),n=(0,o.useLocation)().search,e=c().useMemo((function(){return new URLSearchParams(n)}),[n]),S.on("connect",(function(){return I(r,void 0,void 0,(function(){var t,n,r;return f(this,(function(o){switch(o.label){case 0:return e.get("nodeId")?(t=new p(e.get("nodeId"),C),y(t),r=(n=console).log,[4,t.getType()]):[3,2];case 1:r.apply(n,[o.sent(),"proxy"]),o.label=2;case 2:return[2]}}))}))})),S.on("disconnect",(function(){T("Disconnected from server")})),(0,t.jsx)(l.Container,{children:(0,t.jsx)(l.Row,{children:(0,t.jsxs)(l.Col,R({className:"pt-5"},{children:[(0,t.jsx)("h1",{children:"Selector node control"}),(0,t.jsx)(l.Form,{children:(0,t.jsxs)(l.Form.Group,{children:[(0,t.jsx)(l.Form.Label,R({htmlFor:"inputPassword5"},{children:"Select Person"})),(0,t.jsx)(l.Form.Control,{type:"number",id:"PersonIdSelection",placeholder:"Type in PersonId",value:O||"",onChange:function(e){h(parseInt(e.target.value,10))}}),(0,t.jsxs)(l.Form.Select,R({required:!0,className:"mt-2","aria-label":"Default select example",onChange:function(e){d(parseInt(e.target.value,10))},value:N},{children:[(0,t.jsx)("option",{children:"Please select day"}),(0,t.jsx)("option",R({value:E.FRIDAY},{children:"Friday"})),(0,t.jsx)("option",R({value:E.SATURDAY},{children:"Saturday"})),(0,t.jsx)("option",R({value:E.SUNDAY},{children:"Sunday"}))]})),(0,t.jsx)("br",{}),(0,t.jsx)(l.Button,R({variant:"primary",type:"submit",className:"w-100",size:"lg",onClick:function(){return I(r,void 0,void 0,(function(){return f(this,(function(e){switch(e.label){case 0:return D?[4,D.setSettings([N,O])]:(T("No operation was found selected"),[2]);case 1:return e.sent(),[4,D.retriggerOperationChainForward()];case 2:return e.sent(),[2]}}))}))}},{children:"Trigger"}))]})}),(0,t.jsx)("p",{children:s})]}))})})}const N=function(){function e(e){this.socket=e}return e.prototype.invoke=function(e,t,n){for(var r=this,o=[],i=3;i<arguments.length;i++)o[i-3]=arguments[i];return new Promise((function(i,c){var a=function(e){r.socket.off(t,a),i(e)};r.socket.emit(e,t,n,o,a)}))},e.prototype.on=function(e,t){this.socket.on(e,t)},e.prototype.once=function(e,t){this.socket.once(e,t)},e.prototype.sendMessage=function(e,t){this.socket.emit(e,t)},e}();var d=function(){return d=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},d.apply(this,arguments)};const v=require("react-dom/client");require("bootstrap/dist/css/bootstrap.min.css"),require("bootstrap");var D=document.getElementById("root");D?(0,v.createRoot)(D).render((0,t.jsx)(o.BrowserRouter,{children:(0,t.jsx)((function(){return(0,t.jsx)(r(),{children:(0,t.jsx)(u.Provider,d({value:s},{children:(0,t.jsx)(_.Provider,d({value:new N(s)},{children:(0,t.jsxs)(o.Routes,{children:[(0,t.jsx)(o.Route,{path:"/",element:(0,t.jsx)("div",{children:"Home"})}),(0,t.jsx)(o.Route,{path:"/selector-node-controller",element:(0,t.jsx)(P,{})})]})}))}))})}),{})})):console.error('Could not find element with id "root"')})();